import{j as e,L as U,a as y,b as F,c as C,q as E,F as V,v as B,w as K,x as k,y as T,_ as L,u as $,r as p,z as P,B as q,I as z,E as G,G as I,H as f,J as R,K as M,P as j,Q as Y}from"./index-CM3o3oxI.js";import{a as _,B as H}from"./buttons-D6twyJzD.js";import{S as J,a as h}from"./container-BrufLho7.js";import{S as w}from"./select-CAcpIBi7.js";import{D as Q,F as O,T as W}from"./FilterTable-RpBPadsc.js";import{M as X}from"./menu-BPwsHCXJ.js";import"./index-Cp4_Qu_D.js";import"./index-fKyMXagy.js";const Z=[{accessorKey:"index",header:"Id",cell:t=>{const a=t.row.index;return e.jsx("span",{children:a+1})},enableSorting:!0,sortingFn:(t,a)=>t.index>a.index?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"profile",enableSorting:!1,header:()=>"Profile",cell:t=>{const a=t.getValue();return a?e.jsx("img",{src:a,loading:"lazy",alt:"profile",className:"w-10 aspect-square rounded-full"}):e.jsx("img",{alt:"profile",className:"w-10 aspect-square rounded-full"})}},{accessorKey:"name",header:()=>"Name",cell:t=>{const a=t.getValue(),{id:r,jobType:c}=t.row.original;return e.jsxs("div",{className:"w-44 cursor-pointer",children:[e.jsx(U,{to:`/crm/employees/${r}`,className:"text-sm hover:underline text-slate-700 font-semibold",children:a}),e.jsx("p",{className:"text-sm",children:c})]})}},{accessorKey:"email",header:()=>"Email",cell:t=>{const a=t.getValue();return e.jsx("div",{className:"w-52 text-sm",children:a})}},{accessorKey:"date",header:()=>e.jsx("span",{children:"Date"}),cell:t=>{const a=t.getValue(),r=new Date(a);return e.jsx("span",{children:r.toLocaleDateString()})},sortDescFirst:!1},{accessorKey:"age",header:()=>"Age",sortDescFirst:!1,cell:t=>{const a=t.getValue();return a?e.jsx(e.Fragment,{children:a}):"--"}},{accessorKey:"status",header:"Status",cell:t=>{const a=t.getValue();return a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{style:{backgroundColor:a==null?void 0:a.color},className:"w-3 h-3 rounded-full"}),e.jsx("span",{children:a==null?void 0:a.name})]}):"--"},sortingFn:(t,a,r)=>t.getValue(r).name>a.getValue(r).name?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"id",enableSorting:!1,header:()=>"Actions",cell:t=>{const a=y(),r=F(),c=C(),{id:m,name:o}=t.row.original,l=d=>{r(`/crm/employees/${d}/edit`,{state:{from:c}})},u=d=>{r(`/crm/employees/${d}`,{state:{from:c}})},i=d=>{K.fire({title:"Are you sure?",text:`You want to delete ${o} user!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(g=>{g.isConfirmed&&(a(k(d)),a(T(d)),L.success(`${o} deleted successfull`,{position:"top-right"}))})};return e.jsxs(X,{children:[e.jsxs("li",{onClick:()=>{l(m)},children:[e.jsx(E,{})," Edit"]}),e.jsxs("li",{onClick:()=>{u(m)},children:[e.jsx(V,{})," View"]}),e.jsxs("li",{onClick:()=>{i(m)},children:[e.jsx(B,{})," Delete"]})]})}}],{followUp:ee,status:se}=M,de=()=>{const{users:t,loading:a}=$(s=>s.users),[r,c]=p.useState(""),[m,o]=p.useState(!1),[l,u]=p.useState({allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}}),i=y(),d=F(),{pathname:g}=C(),x=async s=>{i(j(!0)),await i(Y(s)),i(j(!1))},b=()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})),o(!1),c(""),x({...l,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})},v=s=>{o(!0),u(n=>{const A={...n.dates,...s};return{...n,dates:A}}),x({...l,dates:s})},S=s=>{u(n=>({...n,status:s})),o(!0),x({...l,status:s})},N=s=>{u(n=>({...n,allowFollowUp:s})),o(!0),x({...l,allowFollowUp:s})},D=s=>{c(s),o(s!=="")};return p.useEffect(()=>(i(P("employee")),()=>i(q())),[i,g]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(h,{children:e.jsx(Q,{value:l.dates,onChange:v})}),e.jsx(h,{children:e.jsx(z,{focus:!0,icon:e.jsx(G,{className:"text-slate-500",size:15}),type:"search",height:"33px",value:r,placeholder:"Search here..",onChange:s=>{var n;D((n=s==null?void 0:s.target)==null?void 0:n.value)}})}),m&&e.jsx(h,{children:e.jsx("div",{className:"px-1",children:e.jsx(_,{icon:e.jsx(I,{}),onClick:b})})}),e.jsx(h,{children:e.jsx(O,{label:"Filter Employee",onChangeClear:()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"}})),x({...l,allowFollowUp:{type:"All"},status:{name:"All"}})},children:e.jsxs("div",{className:"p-4 flex gap-4 flex-col",children:[e.jsx(f,{label:"Allow FollowUp",children:e.jsx(w,{options:ee,onChange:s=>{N(s)},value:l==null?void 0:l.allowFollowUp,fields:s=>s==null?void 0:s.type})}),e.jsx(f,{label:"Status",children:e.jsx(w,{options:se,onChange:s=>{S(s)},value:l==null?void 0:l.status,fields:s=>s==null?void 0:s.name})})]})})})]}),e.jsxs("div",{className:"p-6 flex gap-6 flex-col",children:[e.jsx("div",{className:"flex gap-2 items-center justify-between ",children:e.jsx(H,{text:"Add Employee",icon:e.jsx(R,{}),type:"button",onClick:()=>{d("/crm/employees/add")}})}),e.jsx("div",{className:"p-2 rounded-md border border-slate-200 bg-white",children:e.jsx(W,{loading:a,Columns:Z,data:t,globalFilter:r,setGlobalFilter:c})})]})]})};export{de as default};
